# Changelog

All notable changes to FireFire will be documented in this file.

## [0.4.0] - 2025-11-21

### ğŸ‰ Major Features

#### SQLite æ•°æ®åº“å­˜å‚¨
- **è¿ç§»åˆ° SQLite**: ä» JSON æ–‡ä»¶ç´¢å¼•è¿ç§»åˆ° `better-sqlite3`ï¼Œå¤§å¹…æå‡æ€§èƒ½
- **FTS5 å…¨æ–‡æœç´¢**: æ”¯æŒé«˜æ€§èƒ½å…¨æ–‡æœç´¢ï¼Œæœç´¢é€Ÿåº¦ <10ms (50,000+ ç¬”è®°)
- **é«˜æ•ˆç´¢å¼•**: B-Tree ç´¢å¼•ç”¨äºæ ‡ç­¾ã€é“¾æ¥å’Œæ—¥æœŸæŸ¥è¯¢
- **è‡ªåŠ¨è§¦å‘å™¨**: è‡ªåŠ¨åŒæ­¥å…¨æ–‡æœç´¢ç´¢å¼•
- **æ•°æ®åº“ä½ç½®**: `~/.firefire/firefire.db`

#### æ—¥è®°åŠŸèƒ½ (Daily Journal)
- **è‡ªåŠ¨ç”Ÿæˆ**: æ¯å¤©å‡Œæ™¨è‡ªåŠ¨åˆ›å»ºä»Šæ—¥æ—¥è®°
- **å¿«é€Ÿè®¿é—®**: æ–‡ä»¶åˆ—è¡¨é¡¶éƒ¨æ·»åŠ "ä»Šæ—¥æ—¥è®°"æŒ‰é’®
- **æ—¥æœŸæ ¼å¼**: YYYY-MM-DD (ä¾‹å¦‚: 2025-11-21.cwjson)
- **ä¸“ç”¨ç›®å½•**: æ‰€æœ‰æ—¥è®°å­˜å‚¨åœ¨ `journals/` æ–‡ä»¶å¤¹
- **æ•°æ®åº“é›†æˆ**: æ—¥è®°åœ¨æ•°æ®åº“ä¸­æ ‡è®°ä¸º `is_journal = 1`
- **å®šæ—¶æ£€æŸ¥**: æ¯åˆ†é’Ÿæ£€æŸ¥æ˜¯å¦éœ€è¦åˆ›å»ºæ–°æ—¥è®°

### âœ¨ Enhancements

#### ç”¨æˆ·ç•Œé¢
- **å¿«é€Ÿç¬”è®°å’Œæ—¥è®°**: ä¸¤ä¸ªæŒ‰é’®å¹¶æ’æ˜¾ç¤ºï¼Œæ›´å¥½çš„å¸ƒå±€
- **æ ‡ç­¾ç­›é€‰ä¼˜åŒ–**: ä¿®å¤æ ‡ç­¾é¢œè‰²æ˜¾ç¤ºé—®é¢˜
- **ä¾§è¾¹æ å¸ƒå±€**: ä¿®å¤å®½åº¦ä¸ä¸€è‡´å’Œå†…å®¹æº¢å‡ºé—®é¢˜

#### æ•°æ®åº“ API
- `getAllTags()`: è·å–æ‰€æœ‰æ ‡ç­¾åŠä½¿ç”¨æ¬¡æ•°
- `getNotesByTag()`: æŒ‰æ ‡ç­¾ç­›é€‰ç¬”è®°
- `getBacklinks()`: è·å–åå‘é“¾æ¥
- `searchNotes()`: å…¨æ–‡æœç´¢ï¼ˆFTS5ï¼‰
- `getJournals()`: è·å–æ—¥è®°åˆ—è¡¨ï¼ˆæ”¯æŒåˆ†é¡µï¼‰
- `journalExists()`: æ£€æŸ¥æŒ‡å®šæ—¥æœŸçš„æ—¥è®°æ˜¯å¦å­˜åœ¨

### ğŸ”§ Technical Improvements

#### æ„å»ºç³»ç»Ÿ
- **canvas ç§»é™¤**: ç§»é™¤ canvas ä¾èµ–ä»¥é¿å…è·¨å¹³å°ç¼–è¯‘é—®é¢˜
- **better-sqlite3 ç¼–è¯‘**: æ·»åŠ  postinstall è„šæœ¬è‡ªåŠ¨é‡æ–°ç¼–è¯‘åŸç”Ÿæ¨¡å—
- **@electron/rebuild**: ä½¿ç”¨å®˜æ–¹å·¥å…·é‡æ–°ç¼–è¯‘ Electron åŸç”Ÿæ¨¡å—
- **Windows æ„å»º**: é…ç½® `npmRebuild: false` é¿å… Windows æ„å»ºå¤±è´¥

#### ä»£ç ç»“æ„
- **dbManager.js**: æ–°å¢æ•°æ®åº“ç®¡ç†å™¨æ¨¡å—
- **journalManager.js**: æ–°å¢æ—¥è®°ç®¡ç†å™¨æ¨¡å—
- **IPC æ¥å£**: æ‰©å±• preload.js å’Œ electronAPI.js
- **æ•°æ®æå–**: æ·»åŠ ä» Tiptap JSON æå–æ ‡ç­¾ã€é“¾æ¥ã€æ ‡é¢˜ã€æ–‡æœ¬çš„å·¥å…·å‡½æ•°

### ğŸ“ Documentation

- **openspec/storage-optimization-analysis.md**: SQLite è¿ç§»æ–¹æ¡ˆåˆ†æ
- **openspec/daily-journal-feature.md**: æ—¥è®°åŠŸèƒ½å®Œæ•´è®¾è®¡æ–‡æ¡£

### ğŸ› Bug Fixes

- ä¿®å¤ sidebar å®½åº¦ä¸ä¸€è‡´ï¼ˆ64px vs 80pxï¼‰
- ä¿®å¤ sidebar å†…å®¹æº¢å‡ºåˆ°å…¶ä»–å¸ƒå±€åŒºåŸŸ
- ä¿®å¤æ ‡ç­¾ç­›é€‰é¢œè‰²æ˜¾ç¤ºä¸ºé»‘è‰²
- ä¿®å¤ `readSettingFile` æœªå¯¼å‡ºå¯¼è‡´å¯åŠ¨é”™è¯¯
- ä¿®å¤ better-sqlite3 Node MODULE_VERSION ä¸åŒ¹é…

### ğŸ”¨ Breaking Changes

- **ç´¢å¼•ç³»ç»Ÿ**: ä» `indexManager.js` (JSON) è¿ç§»åˆ° `dbManager.js` (SQLite)
- **æ•°æ®è¿ç§»**: é¦–æ¬¡è¿è¡Œæ—¶éœ€è¦é‡æ–°ç´¢å¼•æ‰€æœ‰ç¬”è®°ï¼ˆè‡ªåŠ¨å®Œæˆï¼‰
- **canvas ç§»é™¤**: å¦‚æœä¾èµ– canvas åŠŸèƒ½ï¼Œéœ€è¦é‡æ–°è¯„ä¼°

### ğŸ“¦ Dependencies

#### Added
- `better-sqlite3@^11.10.0`: é«˜æ€§èƒ½ SQLite æ•°æ®åº“
- `@electron/rebuild@^3.7.2` (devDependency): Electron åŸç”Ÿæ¨¡å—é‡æ–°ç¼–è¯‘å·¥å…·

#### Removed
- `canvas@2.11.2`: ç§»é™¤ä»¥ç®€åŒ–è·¨å¹³å°æ„å»º

### ğŸ“Š Performance

| æŒ‡æ ‡ | v0.3.4 (JSON) | v0.4.0 (SQLite) | æ”¹è¿› |
|------|--------------|----------------|------|
| å…¨æ–‡æœç´¢ (10K ç¬”è®°) | ~500ms | <10ms | **50x** |
| æ ‡ç­¾ç­›é€‰ | O(n) | O(log n) | **å¤§å¹…æå‡** |
| ç¬”è®°ä¿å­˜ | 100-200ms | <5ms | **20-40x** |
| æ”¯æŒç¬”è®°æ•°é‡ | ~5K | 50K+ | **10x** |

### ğŸš€ Migration Guide

#### ä» v0.3.x å‡çº§

1. **å¤‡ä»½æ•°æ®**:
   ```bash
   cp -r ~/.firefire ~/.firefire.backup
   ```

2. **æ›´æ–°åº”ç”¨**:
   - ä¸‹è½½ v0.4.0
   - é¦–æ¬¡å¯åŠ¨ä¼šè‡ªåŠ¨åˆ›å»ºæ•°æ®åº“å¹¶ç´¢å¼•æ‰€æœ‰ç¬”è®°

3. **éªŒè¯**:
   - æ£€æŸ¥ `~/.firefire/firefire.db` æ˜¯å¦åˆ›å»º
   - æµ‹è¯•æ ‡ç­¾ç­›é€‰å’Œæœç´¢åŠŸèƒ½

#### æ•°æ®åº“è¿ç§»

æ•°æ®åº“ä¼šåœ¨é¦–æ¬¡å¯åŠ¨æ—¶è‡ªåŠ¨åˆ›å»ºã€‚åç»­ç¼–è¾‘ç¬”è®°æ—¶ä¼šè‡ªåŠ¨æ›´æ–°ç´¢å¼•ã€‚

### ğŸ¯ What's Next (v0.5.0)

- æ—¥è®°æ»šåŠ¨è§†å›¾ (Logseq é£æ ¼)
- æ—¥æœŸè·³è½¬å’Œç›¸å¯¹æ—¥æœŸæ˜¾ç¤º
- æ— é™æ»šåŠ¨åŠ è½½å†å²æ—¥è®°
- å›¾è°±å¯è§†åŒ–å¢å¼º
- åå‘é“¾æ¥é¢æ¿

---

## [0.3.4] - 2023-04-09

### Features
- æ”¯æŒå­—ä½“å±…ä¸­ã€å±…å·¦ã€å±…å³
- æ”¯æŒæˆªå›¾ç²˜è´´

### Bug Fixes
- ä¿®å¤å½“å‰è·¯å¾„ BUG

## [0.3.3] - 2023-04-08

### Features
- æ”¯æŒä¿å­˜æ–‡ä»¶ä½ç½®
- è°ƒæ•´é¡µé¢æ ·å¼
- æ”¯æŒæš—é»‘æ¨¡å¼
- è‡ªåŠ¨ä¿å­˜åŠŸèƒ½
- å‡çº§ç‰ˆæœ¬

## [0.3.0] - 2023-03-28

### Features
- æ”¯æŒæ–‡ä»¶å¤¹ç®¡ç†
- è‡ªåŠ¨ä¿å­˜åŠŸèƒ½

---

**Note**: This project follows [Semantic Versioning](https://semver.org/).
