# Implementation Tasks

## Phase 1: 标签系统 (Tags)

### 1. Tiptap 标签扩展
- [ ] 1.1 创建 `tagExtension.js` Tiptap 扩展
- [ ] 1.2 实现 `#标签名` 输入规则（InputRule）
- [ ] 1.3 实现标签节点的渲染（HTML/React）
- [ ] 1.4 添加标签样式（.tag-node）
- [ ] 1.5 处理中文标签支持
- [ ] 1.6 集成到编辑器扩展列表

### 2. 标签数据管理
- [ ] 2.1 扩展 .cwjson 文件格式（添加 meta.tags）
- [ ] 2.2 创建 `electron/indexManager.js` 索引管理器
- [ ] 2.3 实现标签提取逻辑（从文档内容中）
- [ ] 2.4 实现标签索引构建（tags -> notes 映射）
- [ ] 2.5 实现标签索引更新（保存时触发）
- [ ] 2.6 创建 `~/.firefire/index.json` 索引文件

### 3. 标签 UI 组件
- [ ] 3.1 创建 `TagList.jsx` 组件（侧边栏标签列表）
- [ ] 3.2 实现标签点击筛选功能
- [ ] 3.3 显示标签使用计数
- [ ] 3.4 实现标签搜索/过滤
- [ ] 3.5 创建 `TagCloud.jsx` 组件（可选，标签云）

### 4. 侧边栏重构
- [ ] 4.1 重新设计侧边栏布局
- [ ] 4.2 添加"全部笔记"视图
- [ ] 4.3 添加"标签"子菜单
- [ ] 4.4 文件夹视图改为可折叠
- [ ] 4.5 添加快速笔记按钮

## Phase 2: 内部链接系统 (Internal Links)

### 5. Tiptap 链接扩展
- [ ] 5.1 创建 `internalLinkExtension.js` Tiptap 扩展
- [ ] 5.2 实现 `[[链接]]` 输入规则
- [ ] 5.3 实现链接节点的渲染
- [ ] 5.4 添加链接样式（exists/not-exists）
- [ ] 5.5 处理链接点击事件（打开目标笔记）
- [ ] 5.6 集成到编辑器扩展列表

### 6. 链接自动补全
- [ ] 6.1 使用 @tiptap/suggestion 实现自动补全
- [ ] 6.2 创建 `LinkSuggestionList.jsx` 组件
- [ ] 6.3 实现笔记搜索 API
- [ ] 6.4 实现键盘导航（上/下/回车）
- [ ] 6.5 显示笔记标题和标签
- [ ] 6.6 支持模糊搜索

### 7. 链接索引管理
- [ ] 7.1 扩展 .cwjson 文件格式（添加 meta.outgoingLinks）
- [ ] 7.2 实现链接提取逻辑
- [ ] 7.3 实现链接索引构建（outgoing/incoming）
- [ ] 7.4 实现反向链接计算
- [ ] 7.5 实现链接存在性检查
- [ ] 7.6 处理笔记重命名（更新所有链接）

### 8. 反向链接 UI
- [ ] 8.1 创建 `BackLinks.jsx` 组件
- [ ] 8.2 显示反向链接列表
- [ ] 8.3 显示链接上下文（摘录）
- [ ] 8.4 实现点击跳转
- [ ] 8.5 集成到编辑器右侧栏（可选）

## Phase 3: 快速笔记体验

### 9. 快速笔记功能
- [ ] 9.1 创建"快速笔记"按钮
- [ ] 9.2 实现一键创建笔记（无需选择文件夹）
- [ ] 9.3 智能默认保存位置（Quick Notes/）
- [ ] 9.4 自动生成笔记文件名（时间戳或标题）
- [ ] 9.5 启动时默认进入快速笔记模式（可配置）

### 10. 搜索增强
- [ ] 10.1 实现全文搜索 API
- [ ] 10.2 添加搜索栏组件
- [ ] 10.3 支持标签筛选（#标签）
- [ ] 10.4 支持日期筛选
- [ ] 10.5 显示搜索结果高亮
- [ ] 10.6 搜索结果按相关性排序

### 11. UI 优化
- [ ] 11.1 重新设计主界面布局
- [ ] 11.2 笔记列表支持多种排序（时间/标题/标签）
- [ ] 11.3 添加视图切换（列表/卡片/时间线）
- [ ] 11.4 优化移动端适配
- [ ] 11.5 添加快捷键支持

## Phase 4: 高级功能（可选）

### 12. 图谱可视化
- [ ] 12.1 选择图谱库（vis-network / d3.js）
- [ ] 12.2 创建 `GraphView.jsx` 组件
- [ ] 12.3 实现节点和边的渲染
- [ ] 12.4 支持缩放和拖拽
- [ ] 12.5 高亮当前笔记和相关笔记
- [ ] 12.6 支持节点点击打开笔记

### 13. 标签管理
- [ ] 13.1 创建标签管理页面
- [ ] 13.2 支持标签重命名
- [ ] 13.3 支持标签合并
- [ ] 13.4 支持标签删除
- [ ] 13.5 标签使用统计

### 14. 性能优化
- [ ] 14.1 索引文件懒加载
- [ ] 14.2 大文件搜索优化
- [ ] 14.3 虚拟列表（大量笔记时）
- [ ] 14.4 索引缓存机制
- [ ] 14.5 并发索引构建

## Phase 5: 测试与文档

### 15. 测试
- [ ] 15.1 测试标签提取和索引
- [ ] 15.2 测试链接提取和索引
- [ ] 15.3 测试反向链接计算
- [ ] 15.4 测试大量笔记性能（1000+ 笔记）
- [ ] 15.5 测试笔记重命名时链接更新
- [ ] 15.6 测试跨平台兼容性

### 16. 文档
- [ ] 16.1 更新 README.md（添加标签和链接说明）
- [ ] 16.2 创建用户指南
- [ ] 16.3 添加快捷键文档
- [ ] 16.4 添加 FAQ
